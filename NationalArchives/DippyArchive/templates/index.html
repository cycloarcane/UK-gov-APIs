<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>üé≤ National Archives Lucky Dip</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<!-- ---------- styles ---------- -->
<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif;
  line-height:1.45;
  background:#0d1117;
  color:#f0f6fc;
  overflow:hidden;
}
body{
  display:flex;
  justify-content:center;
  align-items:center;
  position:relative;
}

/* animated National Archives logo background */
body::before, body::after{
  content:"";
  position:absolute;
  inset:-50%;                        /* oversize -> no gaps */
  background:url("https://www.nationalarchives.gov.uk/wp-content/uploads/sites/24/2019/07/tna-logo-600x315.jpg") repeat;
  background-size:220px;
  opacity:0.08;                      /* subtle layer */
  animation:drift 60s linear infinite;
  pointer-events:none;
}
body::after{
  animation-direction:reverse;       /* counter-movement */
  opacity:0.05;
}
@keyframes drift{
  to{transform:translate(25%,25%);}
}

/* card */
#card{
  background:#161b22;
  border:1px solid #30363d;
  border-radius:1rem;
  padding:2rem 2.5rem;
  max-width:46rem;
  width:90vw;
  box-shadow:0 8px 16px rgba(0,0,0,.45);
  z-index:1;
}
h1{font-size:2rem;margin-bottom:1rem;text-align:center}
h2{font-size:1.25rem;margin:.8rem 0 .4rem}
p{margin:.3rem 0}
a{color:#58a6ff;text-decoration:none}
a:hover{text-decoration:underline}
button{
  margin-top:1.2rem;
  padding:.7rem 1.4rem;
  font-size:1rem;
  border:none;
  border-radius:.5rem;
  background:#238636;
  color:#fff;
  cursor:pointer;
  transition:background .2s;
}
button:hover{background:#2ea043}
</style>
</head>
<body>

<div id="card">
  <h1>üé≤ Lucky-Dip</h1>

  <!-- NEW: show the word -->
  <p><em>Search term:</em> <span id="word">‚Ä¶</span></p>

  <h2 id="title">Loading‚Ä¶</h2>
  <p><strong>Held by:</strong> <span id="heldBy"></span></p>
  <p id="desc"></p>
  <p><a id="link" target="_blank" rel="noopener">Open in Discovery ‚ÜóÔ∏é</a></p>

  <div style="text-align:center">
    <button id="roll">Roll again</button>
  </div>
</div>

<!-- ---------- scripts ---------- -->
<script>
const $ = id => document.getElementById(id);

async function roll(){
  try{
    const r = await fetch('/api/random');
    if(!r.ok) throw new Error(r.status+" "+r.statusText);
    const d = await r.json();

    $('word' ).textContent  = d.query;
    $('title').textContent  = d.title       || 'Untitled';
    $('heldBy').textContent = d.heldBy      || 'Unknown';
    $('desc').textContent   = d.description || '';
    $('link').href = $('link').textContent = d.url;
  }catch(err){
    $('title').textContent = '‚ö†Ô∏è Error fetching record';
    console.error(err);
  }
}
$('roll').onclick = roll;
roll();
</script>
</body>
</html>
